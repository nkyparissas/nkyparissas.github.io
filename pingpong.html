<!doctype html>
<html lang="en">
	<head>
		<title>Ping-pong</title>		
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700,800|Playfair+Display:,300, 400, 700" rel="stylesheet">
		
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/animate.css">
		<link rel="stylesheet" href="css/owl.carousel.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mediaelement@4.2.7/build/mediaelementplayer.min.css">
		
		<link rel="stylesheet" href="fonts/ionicons/css/ionicons.min.css">
		<link rel="stylesheet" href="fonts/fontawesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="fonts/academicons/css/academicons.min.css">
		<link rel="stylesheet" href="fonts/flag-icons/css/flag-icons.min.css";
		
		<!-- Theme Style -->
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/mycss.css">
		
		<!-- Favicon
		–––––––––––––––––––––––––––––––––––––––––––––––––– -->
		<link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
		<link rel="icon" href="./img/favicon.ico" type="image/x-icon">
	</head>
	<body>
		
		<div class="site-wrap">
			
			<a href="#" class="offcanvas-toggle js-offcanvas-toggle">Menu</a>
			<div class="offcanvas_menu" id="offcanvas_menu">
				<ul class="mb-5">
					<li class="active"><a href="index.html">Home</a></li>
					<li><a href="publications.html">Publications</a></li>
					<li><a href="interesting_stuff.html">Interesting Stuff</a></li>
					<!--li><a href="./uploads/nkyparissas_cv.pdf" >CV (PDF)</a></li-->
				</ul>
				
				<ul class="social">
					<li><a href="mailto:nkyparissas@ieee.org"  class="fa fa-envelope-square fa-2x"></a></li>
					<li><a href="https://www.facebook.com/nkyparissas"  class="fa fa-facebook-square fa-2x"></a></li>
					<li><a href="https://www.linkedin.com/in/nkyparissas"  class="fa fa-linkedin-square fa-2x"></a></li>
					<li><a href="https://github.com/nkyparissas"  class="fa fa-github-square fa-2x"></a></li>
				</ul>
				<ul class="social">
					<li><a href="https://www.researchgate.net/profile/Nikolaos_Kyparissas"  class="ai ai-researchgate-square ai-2x"></a></li>
					<li><a href="https://tuc.academia.edu/nkyparissas"  class="ai ai-academia-square ai-2x"></a></li>
					<li><a href="https://scholar.google.gr/citations?user=_pt3YHQAAAAJ"  class="ai ai-google-scholar-square ai-2x"></a></li>
					<li><a href="https://orcid.org/0000-0001-6868-5163"  class="ai ai-orcid-square ai-2x"></a></li>
				</ul>
				
				</br><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
				Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
				<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
				
			</div>
			
			<aside style="background-image: url(img/pingpong.jpg);"></aside>
			<main>
				<h2 class="mb-5">Our Ping-pong Scoreboard</h1>
				<div class="mb-5">
					<p>NICK Kyparissas <span class="fi fi-gr"></span> vs. IGOR Wodiany <span class="fi fi-pl"></span><br>
						Weeks won: <noscript>Sorry, your browser does not support JavaScript!</noscript><span id="nickScore"></span> - <span id="igorScore"></span> (draw: <span id="drawScore"></span>)</p>
					<p>
				  		<canvas id="chart"></canvas>
						<noscript>Sorry, your browser does not support JavaScript!</noscript>
					</p>
					The relative score difference is calculated as:
					<center>R(i,n) = sgn(i-n)[(i-n)ln(i/n)]</center>
					where <i>i</i> and <i>n</i> are the scores of Igor and Nick. The table below shows the number of sets won per week for each player.</p>	
				  	<noscript>Sorry, your browser does not support JavaScript!</noscript>
					<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
					<script type='text/javascript'>	
					var tabulate = function (data,columns) {
						var table = d3.select('main').append('table')
						var thead = table.append('thead')
						var tbody = table.append('tbody')
						
						thead.append('tr')
						.selectAll('th')
						.data(columns)
						.enter()
						.append('th')
						.text(function (d) { return d })

						var rows = tbody.selectAll('tr')
						.data(data)
						.enter()
						.append('tr')

						var cells = rows.selectAll('td')
						.data(function(row) {
							return columns.map(function (column) {
								return { column: column, value: row[column] }
							})
						})
						.enter()
						.append('td')
						.text(function (d) { return d.value })

						return table;
					}

					d3.csv('./uploads/Score.csv',function (data) {
						var columns = ['Week','Nick','Igor']
						tabulate(data,columns)
					})		
					</script>
	
					
				</div>
			</main>
			
			<!-- loader -->
			<div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#f4b214"/></svg></div>
			
			<script src="js/jquery-3.2.1.min.js"></script>
			<script src="js/popper.min.js"></script>
			<script src="js/bootstrap.min.js"></script>
			<script src="js/owl.carousel.min.js"></script>
			<script src="js/jquery.waypoints.min.js"></script>
			<script src="js/jquery.countdown.min.js"></script>
			<script src="js/main.js"></script>
			
			<!-- My scoreboard graph -->
			<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
			<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
			<script type="text/javascript">
				d3.csv('./uploads/RelativeScore.csv')
				  .then(makeChart);

				function makeChart(scoreboard) {
				
					var weeksLabels = scoreboard.map(function(d) {return d.Week});
					var scoreData = scoreboard.map(function(d) {return d.RelativeScore});
					var playerColors = scoreboard.map(function(d) {
						if (d.RelativeScore > 0){
							return '#AF0000';
						} else if (d.RelativeScore < 0){
							return '#000090';
						} else {
							return '#A0A0A0'
						}
					});

					var chart = new Chart('chart', {
						type: 'line',
						options: {
							maintainAspectRatio: true,
							autoPadding: true,
							legend: {
								display: false
							},
							scales: {
								xAxes: [{
									scaleLabel: {
										display: true,
										labelString: 'Relative Score Difference',
										fontSize: 15,
										style: 'normal'
									}
								}]
							}
						},
						data: {
							labels: weeksLabels,
							datasets: [{
								data: scoreData,
								borderColor: playerColors,
								borderWidth: 1.75
							}]
						}
					});
				}
			</script>	
			
			<!-- My script to count total weeks won -->
			<script>			
			const process = data =>  {
				const counts = data.reduce(
					(acc, { RelativeScore }) => {
						acc.nickScore   += RelativeScore < 0;
						acc.igorScore   += RelativeScore > 0;
						acc.drawScore   += RelativeScore == 0;
						return acc;
					}, 
					{ nickScore: 0, igorScore: 0, drawScore: 0}
				);

				Object.entries(counts).forEach(([key,val]) => document.getElementById(key).textContent = val)
			}

			let mycsv = './uploads/RelativeScore.csv';
			d3.csv(mycsv)
			.then(function(data) {
			process(data)
			})
			</script>
			
		</div>	
	</body>
</html>		